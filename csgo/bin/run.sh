#!/bin/bash

set -e

SERVER_NAME="CS:GO Dedicated Server"
SERVER_PASSWORD=""
RCON_PASSWORD=""
STEAM_API_KEY=""
GSLT=""
WORKSHOP_COLLECTION=""
WORKSHOP_START_MAP=""

read -sp "SERVER_PASSWORD: " SERVER_PASSWORD
echo
read -sp "RCON_PASSWORD: " RCON_PASSWORD
echo
read -sp "STEAM_API_KEY: " STEAM_API_KEY
echo
read -sp "GSLT: " GSLT
echo
read -p "WORKSHOP_COLLECTION: " WORKSHOP_COLLECTION
read -p "WORKSHOP_START_MAP: " WORKSHOP_START_MAP

docker run --rm -it \
  -eSERVER_NAME="$SERVER_NAME" \
  -eSERVER_PASSWORD="$SERVER_PASSWORD" \
  -eRCON_PASSWORD="$RCON_PASSWORD" \
  -eGSLT="$GSLT" \
  -eSTEAM_API_KEY="$STEAM_API_KEY" \
  -eWORKSHOP_COLLECTION="$WORKSHOP_COLLECTION" \
  -eWORKSHOP_START_MAP="$WORKSHOP_START_MAP" \
  -p27015:27015/udp \
  -p27015:27015 \
  -v /mnt/steam:/mnt/steam \
  steam-ds-csgo
